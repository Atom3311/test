<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0f2a" />
  <title>Снежный Кликер - Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg" aria-hidden="true">
    <div class="aurora"></div>
    <div class="lights"></div>
    <div class="snow" id="snow"></div>
  </div>

  <header class="topbar">
    <div class="brand">
      <div class="logo">★</div>
      <div>
        <div class="title">Снежный Кликер</div>
        <div class="subtitle">Новогодний буст-марафон</div>
      </div>
    </div>
    <div class="userchip" id="userchip">
      <div class="userpic" id="userpic">TG</div>
      <div>
        <div class="username" id="username">Загрузка...</div>
        <div class="userstatus" id="userstatus">Mini App</div>
      </div>
    </div>
    <nav class="nav">
      <button class="pill" data-tab="game">Кликер</button>
      <button class="pill" data-tab="rating">Рейтинг</button>
      <button class="pill" data-tab="profile">Профиль</button>
      <button class="pill" data-tab="win2pay">Win2Pay</button>
    </nav>
  </header>

  <main class="layout">
    <section class="panel" id="tab-game">
      <div class="hero">
        <div class="glow"></div>
        <div class="snowflake" id="clicker">
          <div class="snowcore">❄</div>
          <div class="ring"></div>
        </div>
        <div class="score">
          <div class="score-label">Снежные монеты</div>
          <div class="score-value" id="coins">0</div>
          <div class="score-sub">Скорость: <span id="cps">0</span> монет/сек</div>
        </div>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="stat-title">Серия кликов</div>
          <div class="stat-value" id="streak">0</div>
        </div>
        <div class="stat">
          <div class="stat-title">Множитель</div>
          <div class="stat-value" id="multiplier">x1</div>
        </div>
        <div class="stat">
          <div class="stat-title">Уровень</div>
          <div class="stat-value" id="level">1</div>
        </div>
        <div class="stat">
          <div class="stat-title">Коллекция</div>
          <div class="stat-value" id="collection">0/12</div>
        </div>
      </div>

      <div class="grid">
        <div class="card">
          <div class="card-title">Бусты</div>
          <div class="boosts">
            <button class="boost" data-boost="mult">
              <span>Морозный множитель</span>
              <small>x2 на 30 сек</small>
              <b data-cost="mult">150</b>
            </button>
            <button class="boost" data-boost="auto">
              <span>Авто-елка</span>
              <small>+5 монет/сек</small>
              <b data-cost="auto">300</b>
            </button>
            <button class="boost" data-boost="lucky">
              <span>Счастливая звезда</span>
              <small>Шанс супер-награды</small>
              <b data-cost="lucky">500</b>
            </button>
          </div>
          <div class="paid-title">Платные бусты</div>
          <div class="boosts paid">
            <button class="boost paid-boost" data-paid="frostpack" data-price="99">
              <span>Набор Мороза</span>
              <small>x3 на 60 сек</small>
              <b>₽ 99</b>
            </button>
            <button class="boost paid-boost" data-paid="aurora" data-price="149">
              <span>Северное сияние</span>
              <small>+20 монет/сек</small>
              <b>₽ 149</b>
            </button>
            <button class="boost paid-boost" data-paid="legend" data-price="249">
              <span>Легендарный снег</span>
              <small>Супер-награды 5 мин</small>
              <b>₽ 249</b>
            </button>
          </div>
          <div class="event-hint">Платные бусты ведут на оплату (заглушка).</div>
        </div>

        <div class="card">
          <div class="card-title">События</div>
          <div class="events">
            <label class="toggle">
              <input type="checkbox" id="snowstorm" checked />
              <span>Снежная буря</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="carols" />
              <span>Колядки x1.5</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="gift" />
              <span>Подарок дня</span>
            </label>
          </div>
          <div class="event-hint">Эффекты работают и влияют на прогресс.</div>
        </div>

        <div class="card">
          <div class="card-title">Миссии</div>
          <div class="missions">
            <div class="mission">Сделать 50 кликов <span id="mission-clicks">0/50</span></div>
            <div class="mission">Собрать 1 000 монет <span id="mission-coins">0/1000</span></div>
            <div class="mission">Активировать 3 буста <span id="mission-boosts">0/3</span></div>
          </div>
          <button class="cta" id="claim">Получить подарочек</button>
        </div>
      </div>
    </section>

    <section class="panel hidden" id="tab-rating">
      <div class="panel-head">
        <h2>Таблица рейтинга</h2>
        <div class="note">Заглушка на 100 игроков, данные читаются из БД при подключении.</div>
      </div>
      <div class="table-wrap">
        <table class="rating" id="rating">
          <thead>
            <tr>
              <th>#</th>
              <th>Игрок</th>
              <th>Монеты</th>
              <th>Лига</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="panel hidden" id="tab-profile">
      <div class="panel-head">
        <h2>Профиль игрока</h2>
        <div class="note">Профиль подгружается из БД (заглушки).</div>
      </div>
      <div class="profile">
        <div class="avatar" id="profile-avatar">⛄</div>
        <div class="profile-info">
          <div class="nickname" id="profile-name">Игрок_Север</div>
          <div class="badges" id="profile-badges"></div>
          <div class="profile-grid">
            <div><b>Сезон</b><span id="profile-season">Зима 2025</span></div>
            <div><b>Достижения</b><span id="profile-achievements">0/30</span></div>
            <div><b>Лучший множитель</b><span id="profile-best-mult">x1</span></div>
            <div><b>Подарков</b><span id="profile-gifts">0</span></div>
          </div>
        </div>
        <div class="profile-actions">
          <button class="pill" id="edit-profile">Редактировать</button>
          <button class="pill" id="open-inventory">Инвентарь</button>
          <button class="pill" id="link-account">Связать аккаунт</button>
        </div>
      </div>
    </section>

    <section class="panel hidden" id="tab-win2pay">
      <div class="panel-head">
        <h2>Win2Pay</h2>
        <div class="note">Заглушка платежного окна.</div>
      </div>
      <div class="pay">
        <div class="pay-card">
          <div class="pay-title">Пополнение снежных монет</div>
          <div class="pay-amount" id="pay-total">₽ 0.00</div>
          <div class="pay-field">
            <label>Сумма</label>
            <input id="pay-amount" type="text" placeholder="Введите сумму" />
          </div>
          <div class="pay-field">
            <label>Покупка</label>
            <input id="pay-boost" type="text" placeholder="Буст не выбран" readonly />
          </div>
          <div class="pay-field">
            <label>Способ</label>
            <div class="pay-methods" id="pay-methods">
              <button data-method="card">Карта</button>
              <button data-method="sbp">СБП</button>
              <button data-method="code">Подарочный код</button>
            </div>
          </div>
          <button class="cta" id="pay-button">Оплатить (заглушка)</button>
        </div>
        <div class="pay-info">
          <h3>Безопасность</h3>
          <p>Демонстрационный интерфейс. Транзакции не проводятся.</p>
          <div class="secure">SSL • 3-D Secure • Подтверждение в приложении</div>
        </div>
      </div>
    </section>
  </main>

  <div class="toast" id="toast">Готово</div>
  <footer class="footer">Сделано с теплом и снегом ❄</footer>

  <script src="script.js"></script>
</body>
</html>
